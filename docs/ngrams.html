<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Relationships between words: n-grams and correlations | Research Book</title>
  <meta name="description" content="This is my daily research book for analysis and documentation" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Relationships between words: n-grams and correlations | Research Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is my daily research book for analysis and documentation" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Relationships between words: n-grams and correlations | Research Book" />
  
  <meta name="twitter:description" content="This is my daily research book for analysis and documentation" />
  

<meta name="author" content="Shamsuddeen Muhammad" />


<meta name="date" content="2020-10-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tf-idf.html"/>

<script src="libs/header-attrs-2.4/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"> My PhD Research Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About this Summary Book</a></li>
<li class="chapter" data-level="2" data-path="tidytext.html"><a href="tidytext.html"><i class="fa fa-check"></i><b>2</b> Tidy text format</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tidytext.html"><a href="tidytext.html#chapter-take-away"><i class="fa fa-check"></i><b>2.1</b> Chapter Take Away</a></li>
<li class="chapter" data-level="" data-path="tidytext.html"><a href="tidytext.html#contrasting-tidy-text-with-other-data-structures"><i class="fa fa-check"></i>1.1 Contrasting tidy text with other data structures</a></li>
<li class="chapter" data-level="" data-path="tidytext.html"><a href="tidytext.html#the-unnest_tokens-function"><i class="fa fa-check"></i>1.2 The unnest_tokens function</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="tidytext.html"><a href="tidytext.html#sentences"><i class="fa fa-check"></i><b>2.1.1</b> Sentences</a></li>
<li class="chapter" data-level="2.1.2" data-path="tidytext.html"><a href="tidytext.html#word"><i class="fa fa-check"></i><b>2.1.2</b> Word</a></li>
<li class="chapter" data-level="2.1.3" data-path="tidytext.html"><a href="tidytext.html#chapter"><i class="fa fa-check"></i><b>2.1.3</b> Chapter</a></li>
<li class="chapter" data-level="2.1.4" data-path="tidytext.html"><a href="tidytext.html#by-n-gram"><i class="fa fa-check"></i><b>2.1.4</b> By n-gram</a></li>
<li class="chapter" data-level="2.1.5" data-path="tidytext.html"><a href="tidytext.html#tri-gram"><i class="fa fa-check"></i><b>2.1.5</b> tri-gram</a></li>
<li class="chapter" data-level="2.1.6" data-path="tidytext.html"><a href="tidytext.html#character_-shingles-defined-character"><i class="fa fa-check"></i><b>2.1.6</b> character_ shingles : Defined character</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidytext.html"><a href="tidytext.html#tidying-the-works-of-jane-austen"><i class="fa fa-check"></i>1.3 Tidying the works of Jane Austen</a></li>
<li class="chapter" data-level="" data-path="tidytext.html"><a href="tidytext.html#the-gutenbergr-package"><i class="fa fa-check"></i>1.4 The gutenbergr package</a></li>
<li class="chapter" data-level="" data-path="tidytext.html"><a href="tidytext.html#word-frequencies"><i class="fa fa-check"></i>1.5 Word frequencies</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="SA.html"><a href="SA.html"><i class="fa fa-check"></i><b>3</b> Sentiment Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tidytext.html"><a href="tidytext.html#chapter-take-away"><i class="fa fa-check"></i><b>3.1</b> Chapter Take Away</a></li>
<li class="chapter" data-level="3.2" data-path="SA.html"><a href="SA.html#sentiment-analysis"><i class="fa fa-check"></i><b>3.2</b> Sentiment Analysis</a></li>
<li class="chapter" data-level="" data-path="SA.html"><a href="SA.html#the-sentiments-dataset"><i class="fa fa-check"></i>2.1 The sentiments dataset</a></li>
<li class="chapter" data-level="3.3" data-path="SA.html"><a href="SA.html#lexicon-package-not-in-the-book"><i class="fa fa-check"></i><b>3.3</b> Lexicon package not in the book</a></li>
<li class="chapter" data-level="" data-path="SA.html"><a href="SA.html#sentiment-analysis-with-inner-join"><i class="fa fa-check"></i>2.2 Sentiment analysis with inner join</a></li>
<li class="chapter" data-level="" data-path="SA.html"><a href="SA.html#comparing-the-three-sentiment-dictionaries"><i class="fa fa-check"></i>2.3 Comparing the three sentiment dictionaries</a></li>
<li class="chapter" data-level="" data-path="SA.html"><a href="SA.html#most-common-positive-and-negative-words"><i class="fa fa-check"></i>2.4 Most common positive and negative words</a></li>
<li class="chapter" data-level="" data-path="SA.html"><a href="SA.html#wordclouds"><i class="fa fa-check"></i>2.5 Wordclouds</a></li>
<li class="chapter" data-level="" data-path="SA.html"><a href="SA.html#looking-at-units-beyond-just-words"><i class="fa fa-check"></i>2.6 Looking at units beyond just words</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tf-idf.html"><a href="tf-idf.html"><i class="fa fa-check"></i><b>4</b> TDF-IDF</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidytext.html"><a href="tidytext.html#chapter-take-away"><i class="fa fa-check"></i><b>4.1</b> Chapter Take Away</a></li>
<li class="chapter" data-level="4.2" data-path="tf-idf.html"><a href="tf-idf.html#the-tidy-text-format"><i class="fa fa-check"></i><b>4.2</b> The tidy text format</a></li>
<li class="chapter" data-level="" data-path="tf-idf.html"><a href="tf-idf.html#term-frequency-in-jane-austens-novels"><i class="fa fa-check"></i>3.1 Term frequency in Jane Austen’s novels</a></li>
<li class="chapter" data-level="" data-path="tf-idf.html"><a href="tf-idf.html#zipfs-law"><i class="fa fa-check"></i>3.2 Zipf’s law</a></li>
<li class="chapter" data-level="" data-path="tf-idf.html"><a href="tf-idf.html#the-bind_tf_idf-function"><i class="fa fa-check"></i>3.3 The bind_tf_idf function</a></li>
<li class="chapter" data-level="" data-path="tf-idf.html"><a href="tf-idf.html#a-corpus-of-physics-texts"><i class="fa fa-check"></i>3.4 A corpus of physics texts</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ngrams.html"><a href="ngrams.html"><i class="fa fa-check"></i><b>5</b> Relationships between words: n-grams and correlations</a>
<ul>
<li class="chapter" data-level="" data-path="tidytext.html"><a href="tidytext.html#chapter-take-away"><i class="fa fa-check"></i>Chapter Take Away</a></li>
<li class="chapter" data-level="5.1" data-path="tf-idf.html"><a href="tf-idf.html#the-tidy-text-format"><i class="fa fa-check"></i><b>5.1</b> The tidy text format</a></li>
<li class="chapter" data-level="" data-path="ngrams.html"><a href="ngrams.html#tokenizing-by-n-gram"><i class="fa fa-check"></i>4.1 Tokenizing by n-gram</a></li>
<li class="chapter" data-level="" data-path="ngrams.html"><a href="ngrams.html#counting-and-filtering-n-grams"><i class="fa fa-check"></i>4.1.1 Counting and filtering n-grams</a>
<ul>
<li class="chapter" data-level="" data-path="ngrams.html"><a href="ngrams.html#finding-bigrams-n-2"><i class="fa fa-check"></i>Finding bigrams (n = 2)</a></li>
<li class="chapter" data-level="" data-path="ngrams.html"><a href="ngrams.html#finding-trigam-n-3"><i class="fa fa-check"></i>Finding Trigam (n = 3)</a></li>
<li class="chapter" data-level="" data-path="ngrams.html"><a href="ngrams.html#analyzing-bigrams"><i class="fa fa-check"></i>4.1.1 Analyzing bigrams</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ngrams.html"><a href="ngrams.html#using-bigrams-to-provide-context-in-sentiment-analysis"><i class="fa fa-check"></i>4.1.3 Using bigrams to provide context in sentiment analysis</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.shmuhammad.com/" target="blank">Find more summary of books I read preview_chapter(</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Research Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ngrams" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Relationships between words: n-grams and correlations</h1>
<div id="chapter-take-away" class="section level2 unnumbered" number="">
<h2>Chapter Take Away</h2>
<div class="note">
<p><strong>Take away</strong></p>
<ul>
<li><p>Term frequency:</p></li>
<li><p>tf</p></li>
<li><p>idf</p></li>
</ul>
</div>
</div>
<div id="the-tidy-text-format" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> The tidy text format</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="ngrams.html#cb1-1"></a><span class="kw">library</span>(tidytext)</span>
<span id="cb1-2"><a href="ngrams.html#cb1-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="ngrams.html#cb1-3"></a><span class="kw">library</span>(janeaustenr)</span></code></pre></div>
<p>Many text analysis problems want find the relationships between words, whether :</p>
<ul>
<li>examining which words tend to <code>follow others immediately</code>, or</li>
<li>Which word tend to <code>co-occur</code>within the same documents.</li>
</ul>
<blockquote>
<p>The chapter explore how to use tidytext for calculating and visualizing relationships between words in your text dataset. This includes the token = “ngrams” argument, which tokenizes by pairs of adjacent words rather than by individual ones</p>
</blockquote>
<p>The chapter also introduced two new packages:</p>
<ul>
<li><strong>ggraph:</strong> which extends ggplot2 to construct network plots, and</li>
<li><strong>widyr</strong> which calculates pairwise correlations and distances within a tidy data frame. Together these expand our toolbox for exploring text within the tidy data framework.</li>
</ul>
</div>
<div id="tokenizing-by-n-gram" class="section level2 unnumbered" number="">
<h2>4.1 Tokenizing by n-gram</h2>
<p>Lets find bigrams on asuten works:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="ngrams.html#cb2-1"></a>austen_bigrams &lt;-<span class="st"> </span><span class="kw">austen_books</span>() <span class="op">%&gt;%</span></span>
<span id="cb2-2"><a href="ngrams.html#cb2-2"></a><span class="st">  </span><span class="kw">unnest_tokens</span>(bigram, text, <span class="dt">token =</span> <span class="st">&quot;ngrams&quot;</span>, <span class="dt">n =</span> <span class="dv">2</span>)</span>
<span id="cb2-3"><a href="ngrams.html#cb2-3"></a></span>
<span id="cb2-4"><a href="ngrams.html#cb2-4"></a>austen_bigrams</span></code></pre></div>
<pre><code>## # A tibble: 725,049 x 2
##    book                bigram         
##    &lt;fct&gt;               &lt;chr&gt;          
##  1 Sense &amp; Sensibility sense and      
##  2 Sense &amp; Sensibility and sensibility
##  3 Sense &amp; Sensibility sensibility by 
##  4 Sense &amp; Sensibility by jane        
##  5 Sense &amp; Sensibility jane austen    
##  6 Sense &amp; Sensibility austen 1811    
##  7 Sense &amp; Sensibility 1811 chapter   
##  8 Sense &amp; Sensibility chapter 1      
##  9 Sense &amp; Sensibility 1 the          
## 10 Sense &amp; Sensibility the family     
## # … with 725,039 more rows</code></pre>
<blockquote>
<p>Bigrams can overlaf e.g “sense and” is one token, while “and sensibility” is another.</p>
</blockquote>
</div>
<div id="counting-and-filtering-n-grams" class="section level2 unnumbered" number="">
<h2>4.1.1 Counting and filtering n-grams</h2>
<div id="finding-bigrams-n-2" class="section level3 unnumbered" number="">
<h3>Finding bigrams (n = 2)</h3>
<p>Anlysing most common bi-grams using count:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="ngrams.html#cb4-1"></a>austen_bigrams <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-2"><a href="ngrams.html#cb4-2"></a><span class="st">  </span><span class="kw">count</span>(bigram, <span class="dt">sort =</span> <span class="ot">TRUE</span> )</span></code></pre></div>
<pre><code>## # A tibble: 211,236 x 2
##    bigram       n
##    &lt;chr&gt;    &lt;int&gt;
##  1 of the    3017
##  2 to be     2787
##  3 in the    2368
##  4 it was    1781
##  5 i am      1545
##  6 she had   1472
##  7 of her    1445
##  8 to the    1387
##  9 she was   1377
## 10 had been  1299
## # … with 211,226 more rows</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="ngrams.html#cb6-1"></a>austen_bigrams</span></code></pre></div>
<pre><code>## # A tibble: 725,049 x 2
##    book                bigram         
##    &lt;fct&gt;               &lt;chr&gt;          
##  1 Sense &amp; Sensibility sense and      
##  2 Sense &amp; Sensibility and sensibility
##  3 Sense &amp; Sensibility sensibility by 
##  4 Sense &amp; Sensibility by jane        
##  5 Sense &amp; Sensibility jane austen    
##  6 Sense &amp; Sensibility austen 1811    
##  7 Sense &amp; Sensibility 1811 chapter   
##  8 Sense &amp; Sensibility chapter 1      
##  9 Sense &amp; Sensibility 1 the          
## 10 Sense &amp; Sensibility the family     
## # … with 725,039 more rows</code></pre>
<p>As you can see, still non intersting words appear at the top, which we called stop words. We can separate the bigram words into two columns word1 and word2 and check if a word is stop-words and then remove it.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="ngrams.html#cb8-1"></a>bigrams_separated &lt;-<span class="st"> </span>austen_bigrams <span class="op">%&gt;%</span></span>
<span id="cb8-2"><a href="ngrams.html#cb8-2"></a><span class="st">  </span><span class="kw">separate</span>(bigram, <span class="kw">c</span>(<span class="st">&quot;word1&quot;</span>, <span class="st">&quot;word2&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb8-3"><a href="ngrams.html#cb8-3"></a></span>
<span id="cb8-4"><a href="ngrams.html#cb8-4"></a>bigrams_filtered &lt;-<span class="st"> </span>bigrams_separated <span class="op">%&gt;%</span></span>
<span id="cb8-5"><a href="ngrams.html#cb8-5"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word1 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word) <span class="op">%&gt;%</span></span>
<span id="cb8-6"><a href="ngrams.html#cb8-6"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word2 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word)</span>
<span id="cb8-7"><a href="ngrams.html#cb8-7"></a></span>
<span id="cb8-8"><a href="ngrams.html#cb8-8"></a><span class="co"># new bigram counts:</span></span>
<span id="cb8-9"><a href="ngrams.html#cb8-9"></a>bigram_counts &lt;-<span class="st"> </span>bigrams_filtered <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-10"><a href="ngrams.html#cb8-10"></a><span class="st">  </span><span class="kw">count</span>(word1, word2, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</span>
<span id="cb8-11"><a href="ngrams.html#cb8-11"></a></span>
<span id="cb8-12"><a href="ngrams.html#cb8-12"></a>bigram_counts</span></code></pre></div>
<pre><code>## # A tibble: 33,421 x 3
##    word1   word2         n
##    &lt;chr&gt;   &lt;chr&gt;     &lt;int&gt;
##  1 sir     thomas      287
##  2 miss    crawford    215
##  3 captain wentworth   170
##  4 miss    woodhouse   162
##  5 frank   churchill   132
##  6 lady    russell     118
##  7 lady    bertram     114
##  8 sir     walter      113
##  9 miss    fairfax     109
## 10 colonel brandon     108
## # … with 33,411 more rows</code></pre>
<p>We can put together the bi-gram using function the <code>unite()</code>, which is the inverse of <code>separate()</code></p>
<div class="note">
<p>Thus, “separate/filter/count/unite” let us find the most common bigrams not containing stop-words.</p>
</div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="ngrams.html#cb10-1"></a>bigrams_united &lt;-<span class="st"> </span>bigrams_filtered <span class="op">%&gt;%</span></span>
<span id="cb10-2"><a href="ngrams.html#cb10-2"></a><span class="st">  </span><span class="kw">unite</span>(bigram, word1, word2, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb10-3"><a href="ngrams.html#cb10-3"></a></span>
<span id="cb10-4"><a href="ngrams.html#cb10-4"></a>bigrams_united</span></code></pre></div>
<pre><code>## # A tibble: 44,784 x 2
##    book                bigram                  
##    &lt;fct&gt;               &lt;chr&gt;                   
##  1 Sense &amp; Sensibility jane austen             
##  2 Sense &amp; Sensibility austen 1811             
##  3 Sense &amp; Sensibility 1811 chapter            
##  4 Sense &amp; Sensibility chapter 1               
##  5 Sense &amp; Sensibility norland park            
##  6 Sense &amp; Sensibility surrounding acquaintance
##  7 Sense &amp; Sensibility late owner              
##  8 Sense &amp; Sensibility advanced age            
##  9 Sense &amp; Sensibility constant companion      
## 10 Sense &amp; Sensibility happened ten            
## # … with 44,774 more rows</code></pre>
</div>
<div id="finding-trigam-n-3" class="section level3 unnumbered" number="">
<h3>Finding Trigam (n = 3)</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="ngrams.html#cb12-1"></a><span class="kw">austen_books</span>() <span class="op">%&gt;%</span></span>
<span id="cb12-2"><a href="ngrams.html#cb12-2"></a><span class="st">  </span><span class="kw">unnest_tokens</span>(trigram, text, <span class="dt">token =</span> <span class="st">&quot;ngrams&quot;</span>, <span class="dt">n =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb12-3"><a href="ngrams.html#cb12-3"></a><span class="st">  </span><span class="kw">separate</span>(trigram, <span class="kw">c</span>(<span class="st">&quot;word1&quot;</span>, <span class="st">&quot;word2&quot;</span>, <span class="st">&quot;word3&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb12-4"><a href="ngrams.html#cb12-4"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word1 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word,</span>
<span id="cb12-5"><a href="ngrams.html#cb12-5"></a>         <span class="op">!</span>word2 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word,</span>
<span id="cb12-6"><a href="ngrams.html#cb12-6"></a>         <span class="op">!</span>word3 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word) <span class="op">%&gt;%</span></span>
<span id="cb12-7"><a href="ngrams.html#cb12-7"></a><span class="st">  </span><span class="kw">count</span>(word1, word2, word3, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 8,757 x 4
##    word1     word2     word3         n
##    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;int&gt;
##  1 dear      miss      woodhouse    23
##  2 miss      de        bourgh       18
##  3 lady      catherine de           14
##  4 catherine de        bourgh       13
##  5 poor      miss      taylor       11
##  6 sir       walter    elliot       11
##  7 ten       thousand  pounds       11
##  8 dear      sir       thomas       10
##  9 twenty    thousand  pounds        8
## 10 replied   miss      crawford      7
## # … with 8,747 more rows</code></pre>
</div>
<div id="analyzing-bigrams" class="section level3 unnumbered" number="">
<h3>4.1.1 Analyzing bigrams</h3>
<p>We can use bigrams to do some exploratory analysis. For example, finding the most common strees in each book</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="ngrams.html#cb14-1"></a>bigrams_filtered <span class="op">%&gt;%</span></span>
<span id="cb14-2"><a href="ngrams.html#cb14-2"></a><span class="st">  </span><span class="kw">filter</span>(word2 <span class="op">==</span><span class="st"> &quot;street&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb14-3"><a href="ngrams.html#cb14-3"></a><span class="st">  </span><span class="kw">count</span>(book, word1, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="co"># we used word1, because we have Oxford street always</span></span></code></pre></div>
<pre><code>## # A tibble: 34 x 3
##    book                word1           n
##    &lt;fct&gt;               &lt;chr&gt;       &lt;int&gt;
##  1 Sense &amp; Sensibility berkeley       16
##  2 Sense &amp; Sensibility harley         16
##  3 Northanger Abbey    pulteney       14
##  4 Northanger Abbey    milsom         11
##  5 Mansfield Park      wimpole        10
##  6 Pride &amp; Prejudice   gracechurch     9
##  7 Sense &amp; Sensibility conduit         6
##  8 Sense &amp; Sensibility bond            5
##  9 Persuasion          milsom          5
## 10 Persuasion          rivers          4
## # … with 24 more rows</code></pre>
<p>Using <code>word2</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="ngrams.html#cb16-1"></a>bigrams_filtered <span class="op">%&gt;%</span></span>
<span id="cb16-2"><a href="ngrams.html#cb16-2"></a><span class="st">  </span><span class="kw">filter</span>(word2 <span class="op">==</span><span class="st"> &quot;street&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb16-3"><a href="ngrams.html#cb16-3"></a><span class="st">  </span><span class="kw">count</span>(book, word2, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="co"># we used word1, because we have Oxford street always</span></span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   book                word2      n
##   &lt;fct&gt;               &lt;chr&gt;  &lt;int&gt;
## 1 Sense &amp; Sensibility street    46
## 2 Northanger Abbey    street    31
## 3 Persuasion          street    20
## 4 Mansfield Park      street    14
## 5 Pride &amp; Prejudice   street    12
## 6 Emma                street     4</code></pre>
<p>We can use bigram to also find <code>tf-idf</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="ngrams.html#cb18-1"></a>bigram_tf_idf &lt;-<span class="st"> </span>bigrams_united <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-2"><a href="ngrams.html#cb18-2"></a><span class="st">  </span><span class="kw">count</span>(book, bigram) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-3"><a href="ngrams.html#cb18-3"></a><span class="st">   </span><span class="kw">bind_tf_idf</span>(bigram, book, n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-4"><a href="ngrams.html#cb18-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(tf_idf))</span>
<span id="cb18-5"><a href="ngrams.html#cb18-5"></a></span>
<span id="cb18-6"><a href="ngrams.html#cb18-6"></a>bigram_tf_idf </span></code></pre></div>
<pre><code>## # A tibble: 36,217 x 6
##    book                bigram                n     tf   idf tf_idf
##    &lt;fct&gt;               &lt;chr&gt;             &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 Persuasion          captain wentworth   170 0.0299  1.79 0.0535
##  2 Mansfield Park      sir thomas          287 0.0287  1.79 0.0515
##  3 Mansfield Park      miss crawford       215 0.0215  1.79 0.0386
##  4 Persuasion          lady russell        118 0.0207  1.79 0.0371
##  5 Persuasion          sir walter          113 0.0198  1.79 0.0356
##  6 Emma                miss woodhouse      162 0.0170  1.79 0.0305
##  7 Northanger Abbey    miss tilney          82 0.0159  1.79 0.0286
##  8 Sense &amp; Sensibility colonel brandon     108 0.0150  1.79 0.0269
##  9 Emma                frank churchill     132 0.0139  1.79 0.0248
## 10 Pride &amp; Prejudice   lady catherine      100 0.0138  1.79 0.0247
## # … with 36,207 more rows</code></pre>
<div class="note">
<p>There are advantages and disadvantages to examining the tf-idf of bigrams rather than individual words. Pairs of consecutive words might capture structure that isn’t present when one is just counting single words, and may provide context that makes tokens more understandable (for example, “pulteney street”, in Northanger Abbey, is more informative than “pulteney”). However, the per-bigram counts are also sparser: a typical two-word pair is rarer than either of its component words. Thus, bigrams can be especially useful when you have a very large text dataset.</p>
</div>
</div>
</div>
<div id="using-bigrams-to-provide-context-in-sentiment-analysis" class="section level2 unnumbered" number="">
<h2>4.1.3 Using bigrams to provide context in sentiment analysis</h2>
<p>continue from here</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tf-idf.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Reseach Book.pdf", "Reseach Book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
